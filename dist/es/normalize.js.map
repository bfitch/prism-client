{"version":3,"sources":["../../src/normalize.js"],"names":["camelizeCollection","camelizeKeys","normalize","schema","Normalizer","_parse","__normalize","entityName","parse","res","data","normalizeFn","defaultNormalizer","obj","args","camelizer","Array","isArray","Entity"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,YAA7B,QAAiD,kBAAjD;AACA,SAASC,SAAT,EAAoBC,MAApB,QAAkC,WAAlC;;AAEA,eAAe,SAASC,UAAT,CAAoBC,MAApB,EAA4BC,WAA5B,EAAyCC,UAAzC,EAAqD;AAClE,QAAMC,QAAcH,WAAiBI,GAAD,IAASA,IAAIC,IAA7B,CAApB;AACA,QAAMC,cAAcL,eAAeM,kBAAkBL,UAAlB,CAAnC;;AAEA,SAAO,CAACE,GAAD,EAAMI,GAAN,EAAWC,IAAX,KAAoB;AACzB,UAAMJ,OAAOF,MAAMC,GAAN,CAAb;AACA,WAAOP,UAAUa,UAAUL,IAAV,CAAV,EAA2BC,YAAYE,GAAZ,EAAiBC,IAAjB,EAAuBJ,IAAvB,CAA3B,CAAP;AACD,GAHD;AAID;;AAED,SAASK,SAAT,CAAmBL,IAAnB,EAAyB;AACvB,MAAIM,MAAMC,OAAN,CAAcP,IAAd,CAAJ,EAAyB;AACvB,WAAOV,mBAAmBU,IAAnB,CAAP;AACD,GAFD,MAEO;AACL,WAAOT,aAAaS,IAAb,CAAP;AACD;AACF;;AAED,SAASE,iBAAT,CAA2BL,UAA3B,EAAuC;AACrC,SAAO,CAACM,GAAD,EAAMC,IAAN,EAAYJ,IAAZ,KAAqB;AAC1B,QAAIM,MAAMC,OAAN,CAAcP,IAAd,CAAJ,EAAyB;AACxB,aAAO,CAAC,IAAIP,OAAOe,MAAX,CAAkBX,UAAlB,CAAD,CAAP;AACD,KAFA,MAEM;AACL,aAAO,IAAIJ,OAAOe,MAAX,CAAkBX,UAAlB,CAAP;AACD;AACD,GAND;AAOD","file":"normalize.js","sourcesContent":["import { camelizeCollection, camelizeKeys } from './utils/camelize';\nimport { normalize, schema } from 'normalizr';\n\nexport default function Normalizer(_parse, __normalize, entityName) {\n  const parse       = _parse      || ((res) => res.data);\n  const normalizeFn = __normalize || defaultNormalizer(entityName);\n\n  return (res, obj, args) => {\n    const data = parse(res);\n    return normalize(camelizer(data), normalizeFn(obj, args, data));\n  }\n}\n\nfunction camelizer(data) {\n  if (Array.isArray(data)) {\n    return camelizeCollection(data);\n  } else {\n    return camelizeKeys(data);\n  }\n}\n\nfunction defaultNormalizer(entityName) {\n  return (obj, args, data) => {\n    if (Array.isArray(data)) {\n     return [new schema.Entity(entityName)];\n   } else {\n     return new schema.Entity(entityName);\n   }\n  }\n}\n"]}